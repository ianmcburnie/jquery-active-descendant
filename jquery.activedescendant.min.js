
(function($,window,document,undefined){var pluginName='jquery-active-descendant';$.fn.activeDescendant=function activeDescendant(focusItemSelector,ownedItemSelector,descendantItemsSelector,options){options=$.extend({autoWrap:false,axis:'both',isGrid:false,autoReset:true,autoInit:false,debug:false,disableHomeAndEndKeys:false},options);return this.each(function onEach(){if($.data(this,pluginName)===undefined){var $widget=$(this);var $focusItem=$widget.find(focusItemSelector);var $descendantItems;var $ownedElement=$widget.find(ownedItemSelector);$ownedElement.nextId();$focusItem.attr('aria-owns',$ownedElement.prop('id'));var update=function(currentActiveDescendant,newActiveDescendant,data){var $currentActiveDescendant=$(currentActiveDescendant);var $newActiveDescendant=$(newActiveDescendant);$focusItem.attr('aria-activedescendant',$newActiveDescendant.prop('id'));$currentActiveDescendant.removeAttr('aria-selected');$newActiveDescendant.attr('aria-selected','true');$newActiveDescendant.trigger('activeDescendantChange',data);};var onNavigationChange=function(e,data){if(data.toIndex>=0){update($descendantItems.eq(data.fromIndex),$descendantItems.eq(data.toIndex),data);}};var updateActiveDescendantItems=function(){$descendantItems=$widget.find(descendantItemsSelector);$descendantItems.nextId();if(options.isGrid===true){$widget.trigger('gridNavigationItemsChange');$widget.gridNavigation(descendantItemsSelector,options);}else{$widget.trigger('linearNavigationItemsChange');$widget.linearNavigation(descendantItemsSelector,options);}};$widget.on('activeDescendantItemsChange',updateActiveDescendantItems);$focusItem.on('blur',function(){$focusItem.removeAttr('aria-activedescendant');$widget.find('[aria-selected=true]').removeAttr('aria-selected');});$widget.on('linearNavigationInit gridNavigationInit linearNavigationChange gridNavigationChange',onNavigationChange);$widget.preventScrollKeys(focusItemSelector);updateActiveDescendantItems();$focusItem.on('keydown',function(e){var keyCode=e.keyCode;if(options.axis==='x'&&(keyCode===37||keyCode===39)){e.preventDefault();}else if(options.axis==='y'&&(keyCode===38||keyCode===40)){e.preventDefault();}else if(options.axis==='both'&&keyCode>=37&&keyCode<=40){e.preventDefault();}});$widget.data(pluginName,{installed:true});}else if(options.debug===true){console.log('info: {pluginName} is already installed on {element}'.replace('{pluginName}',pluginName).replace('{element}',this));}});};}(jQuery,window,document));