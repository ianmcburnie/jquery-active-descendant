
(function($,window,document,undefined){var pluginName='jquery-active-descendant';$.fn.activeDescendant=function activeDescendant(focusItemSelector,descendantItemsSelector){return this.each(function onEach(){var $widget=$(this);var $focusItem=$widget.find(focusItemSelector);var $descendantItems;var $descendantItemsContainer;function getDescendantItemsCommonAncestor(){return $descendantItems.first().parents().has($descendantItems.last()).first();}
function update(currentActiveDescendant,newActiveDescendant){var $currentActiveDescendant=$(currentActiveDescendant);var $newActiveDescendant=$(newActiveDescendant);$focusItem.attr('aria-activedescendant',$newActiveDescendant.prop('id'));$currentActiveDescendant.removeAttr('aria-selected');$newActiveDescendant.attr('aria-selected','true');$widget.trigger('activeDescendantChange',$newActiveDescendant);}
function onLinearNavigationChange(e,data){update($descendantItems.eq(data.fromIndex),$descendantItems.eq(data.toIndex));}
function updateActiveDescendantItems(){$descendantItems=$widget.find(descendantItemsSelector);$descendantItems.nextId();if($descendantItemsContainer===undefined&&$descendantItems.length>0){$descendantItemsContainer=getDescendantItemsCommonAncestor();$descendantItemsContainer.nextId();$focusItem.attr('aria-owns',$descendantItemsContainer.prop('id'));}
$widget.linearNavigation(descendantItemsSelector,{activeIndex:-1,clickDelegate:$descendantItems.parent()});}
$widget.on('activeDescendantItemsChange',updateActiveDescendantItems);$focusItem.on('blur',function(){$focusItem.removeAttr('aria-activedescendant');$widget.find('[aria-selected=true]').removeAttr('aria-selected');});$widget.on('linearNavigationChange',onLinearNavigationChange);updateActiveDescendantItems();$.data($widget,pluginName,{installed:true});});};}(jQuery,window,document));