
(function($,window,document,undefined){var pluginName='jquery-active-descendant';$.fn.activeDescendant=function activeDescendant(focusItemSelector,ownedItemSelector,descendantItemsSelector,options){options=$.extend({activeIndex:0,autoInit:false,autoReset:true,autoWrap:false,axis:'both',debug:false,disableHomeAndEndKeys:false,isGrid:false},options);return this.each(function onEachActiveDescendant(){if($.data(this,pluginName)===undefined){var $widget=$(this);var $focusItem=$widget.find(focusItemSelector);var $ownedElement=$widget.find(ownedItemSelector);var $descendantItems;var updateByIndex=function updateByIndex(fromIndex,toIndex){if(toIndex>=0){var $currentActiveDescendant=$($descendantItems.eq(fromIndex));var $newActiveDescendant=$($descendantItems.eq(toIndex));$focusItem.attr('aria-activedescendant',$newActiveDescendant.prop('id'));$currentActiveDescendant.removeAttr('aria-selected');$newActiveDescendant.attr('aria-selected','true');$newActiveDescendant.trigger('activeDescendantChange',{fromIndex:fromIndex,toIndex:toIndex});}};var onNavigationReset=function onNavigationReset(e,data){var $currentActiveDescendant=$($descendantItems.eq(data.fromIndex));$currentActiveDescendant.removeAttr('aria-selected');};var onNavigationChange=function onNavigationChange(e,data){updateByIndex(data.fromIndex,data.toIndex);};var updateActiveDescendantItems=function updateActiveDescendantItems(){$descendantItems=$widget.find(descendantItemsSelector);$descendantItems.nextId();};var onNavigationItemsChange=function onNavigationItemsChange(e,data){updateActiveDescendantItems(data||{});};$ownedElement.nextId();$focusItem.attr('aria-owns',$ownedElement.prop('id'));$widget.on('linearNavigationItemsChange gridNavigationItemsChange',onNavigationItemsChange);if(options.autoReset===true){$focusItem.on('blur',function onFocusItem(){$focusItem.removeAttr('aria-activedescendant');$widget.find('[aria-selected=true]').removeAttr('aria-selected');});}
$widget.on('linearNavigationReset gridNavigationReset',onNavigationReset);$widget.on('linearNavigationInit gridNavigationInit linearNavigationChange gridNavigationChange',onNavigationChange);$widget.preventScrollKeys(focusItemSelector);updateActiveDescendantItems();if(options.isGrid===true){$widget.gridNavigation(descendantItemsSelector,options);}else{$widget.linearNavigation(descendantItemsSelector,options);}
$focusItem.on('keydown',function onFocusItemKeyDown(e){var keyCode=e.keyCode;if(options.axis==='x'&&(keyCode===37||keyCode===39)){e.preventDefault();}else if(options.axis==='y'&&(keyCode===38||keyCode===40)){e.preventDefault();}else if(options.axis==='both'&&keyCode>=37&&keyCode<=40){e.preventDefault();}});$widget.data(pluginName,{installed:true});}else if(options.debug===true){console.log('info: {pluginName} is already installed on {element}'.replace('{pluginName}',pluginName).replace('{element}',this));}});};}(jQuery,window,document));